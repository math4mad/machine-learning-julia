{
  "hash": "fbef7e0bf791683927b3a967c08892ab",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"🍇🍷🍷kaggle-redwine-dataset.qmd\"\n---\n\n:::{.callout-note title=\"info\"}\n - dataset: [Red Wine Quality](https://www.kaggle.com/datasets/uciml/red-wine-quality-cortez-et-al-2009)\n\n - eda : [Red Wine Quality ~ EDA & Classification](https://www.kaggle.com/code/eisgandar/red-wine-quality-eda-classification/input)\n - feature intor : [feature intro](https://www.kaggle.com/code/eisgandar/red-wine-quality-eda-classification?scriptVersionId=112672864&cellId=6)\n::: \n\n\n## 1. load \n\n::: {#ab37fd42 .cell execution_count=1}\n``` {.julia .cell-code}\n using CSV,DataFrames,Tidier,Pipe\n using CairoMakie,AlgebraOfGraphics,MakieThemes\n using ScientificTypes,HypothesisTests,Distributions\n using RCall\n #Makie.set_theme!(ggthemr(:flat))\ndf=CSV.File(\"../data/red-wine-quality.csv\")|>DataFrame\ndf=@chain  df  begin  @clean_names end\n#df=coerce(df,:quality=>Multiclass)\n#df.total_charges=[length(idx)== 0 ? 0 : parse.(Float64,idx) for idx in  df.total_charges]\nnrow,ncol=size(df)\ncats=Symbol.((names(df))[1:end-1])\nfirst(df,3)\n```\n\n::: {.cell-output .cell-output-display execution_count=47}\n```{=html}\n<div><div style = \"float: left;\"><span>3×12 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">fixed_acidity</th><th style = \"text-align: left;\">volatile_acidity</th><th style = \"text-align: left;\">citric_acid</th><th style = \"text-align: left;\">residual_sugar</th><th style = \"text-align: left;\">chlorides</th><th style = \"text-align: left;\">free_sulfur_dioxide</th><th style = \"text-align: left;\">total_sulfur_dioxide</th><th style = \"text-align: left;\">density</th><th style = \"text-align: left;\">p_h</th><th style = \"text-align: left;\">sulphates</th><th style = \"text-align: left;\">alcohol</th><th style = \"text-align: left;\">quality</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">7.4</td><td style = \"text-align: right;\">0.7</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.9</td><td style = \"text-align: right;\">0.076</td><td style = \"text-align: right;\">11.0</td><td style = \"text-align: right;\">34.0</td><td style = \"text-align: right;\">0.9978</td><td style = \"text-align: right;\">3.51</td><td style = \"text-align: right;\">0.56</td><td style = \"text-align: right;\">9.4</td><td style = \"text-align: right;\">5</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: right;\">7.8</td><td style = \"text-align: right;\">0.88</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">2.6</td><td style = \"text-align: right;\">0.098</td><td style = \"text-align: right;\">25.0</td><td style = \"text-align: right;\">67.0</td><td style = \"text-align: right;\">0.9968</td><td style = \"text-align: right;\">3.2</td><td style = \"text-align: right;\">0.68</td><td style = \"text-align: right;\">9.8</td><td style = \"text-align: right;\">5</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: right;\">7.8</td><td style = \"text-align: right;\">0.76</td><td style = \"text-align: right;\">0.04</td><td style = \"text-align: right;\">2.3</td><td style = \"text-align: right;\">0.092</td><td style = \"text-align: right;\">15.0</td><td style = \"text-align: right;\">54.0</td><td style = \"text-align: right;\">0.997</td><td style = \"text-align: right;\">3.26</td><td style = \"text-align: right;\">0.65</td><td style = \"text-align: right;\">9.8</td><td style = \"text-align: right;\">5</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n## 2. describe of data\n\n::: {#fb38fa0a .cell execution_count=2}\n``` {.julia .cell-code}\ndescribe(df)\n```\n\n::: {.cell-output .cell-output-display execution_count=48}\n```{=html}\n<div><div style = \"float: left;\"><span>12×7 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">variable</th><th style = \"text-align: left;\">mean</th><th style = \"text-align: left;\">min</th><th style = \"text-align: left;\">median</th><th style = \"text-align: left;\">max</th><th style = \"text-align: left;\">nmissing</th><th style = \"text-align: left;\">eltype</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Symbol\" style = \"text-align: left;\">Symbol</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Real\" style = \"text-align: left;\">Real</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Real\" style = \"text-align: left;\">Real</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"DataType\" style = \"text-align: left;\">DataType</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: left;\">fixed_acidity</td><td style = \"text-align: right;\">8.31964</td><td style = \"text-align: right;\">4.6</td><td style = \"text-align: right;\">7.9</td><td style = \"text-align: right;\">15.9</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: left;\">volatile_acidity</td><td style = \"text-align: right;\">0.527821</td><td style = \"text-align: right;\">0.12</td><td style = \"text-align: right;\">0.52</td><td style = \"text-align: right;\">1.58</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: left;\">citric_acid</td><td style = \"text-align: right;\">0.270976</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.26</td><td style = \"text-align: right;\">1.0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: left;\">residual_sugar</td><td style = \"text-align: right;\">2.53881</td><td style = \"text-align: right;\">0.9</td><td style = \"text-align: right;\">2.2</td><td style = \"text-align: right;\">15.5</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: left;\">chlorides</td><td style = \"text-align: right;\">0.0874665</td><td style = \"text-align: right;\">0.012</td><td style = \"text-align: right;\">0.079</td><td style = \"text-align: right;\">0.611</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: left;\">free_sulfur_dioxide</td><td style = \"text-align: right;\">15.8749</td><td style = \"text-align: right;\">1.0</td><td style = \"text-align: right;\">14.0</td><td style = \"text-align: right;\">72.0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: left;\">total_sulfur_dioxide</td><td style = \"text-align: right;\">46.4678</td><td style = \"text-align: right;\">6.0</td><td style = \"text-align: right;\">38.0</td><td style = \"text-align: right;\">289.0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: left;\">density</td><td style = \"text-align: right;\">0.996747</td><td style = \"text-align: right;\">0.99007</td><td style = \"text-align: right;\">0.99675</td><td style = \"text-align: right;\">1.00369</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">9</td><td style = \"text-align: left;\">p_h</td><td style = \"text-align: right;\">3.31111</td><td style = \"text-align: right;\">2.74</td><td style = \"text-align: right;\">3.31</td><td style = \"text-align: right;\">4.01</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">10</td><td style = \"text-align: left;\">sulphates</td><td style = \"text-align: right;\">0.658149</td><td style = \"text-align: right;\">0.33</td><td style = \"text-align: right;\">0.62</td><td style = \"text-align: right;\">2.0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">11</td><td style = \"text-align: left;\">alcohol</td><td style = \"text-align: right;\">10.423</td><td style = \"text-align: right;\">8.4</td><td style = \"text-align: right;\">10.2</td><td style = \"text-align: right;\">14.9</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Float64</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">12</td><td style = \"text-align: left;\">quality</td><td style = \"text-align: right;\">5.63602</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">6.0</td><td style = \"text-align: right;\">8</td><td style = \"text-align: right;\">0</td><td style = \"text-align: left;\">Int64</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n---\n## 3. Exploratory data analysis 📉 & data visualization 📊\n\n### 3.1  density of feature\n\n::: {#283eece7 .cell execution_count=3}\n``` {.julia .cell-code}\ndtlayer=data(df)\n\nlet\n  fig=Figure(resolution=(600,800))\n  function plot_single_feature(idx,feature) \n    ax=Axis(fig[fldmod1(idx,3)...];title=\"$(feature)\")\n    plt=dtlayer*mapping(feature)*AlgebraOfGraphics.density(bandwidth=0.5)\n    draw!(ax,plt)\n  end\n  [plot_single_feature(idx,feature) for (idx,feature) in enumerate(cats)]\n  fig\nend\n\n```\n\n::: {.cell-output .cell-output-display execution_count=49}\n![](16-kaggle-redwine-dataset_files/figure-html/cell-4-output-1.svg){}\n:::\n:::\n\n\n### 3.2 relation of variable and quality\n\n::: {#bbdf0052 .cell execution_count=4}\n``` {.julia .cell-code}\nparis1=@chain df begin\n   @select(residual_sugar,quality)\n   @arrange(quality)\n   @group_by(quality)\nend\n# wide_pairs1=@pivot_wider(paris1, names_from =quality, values_from = residual_sugar)\ncats=levels(df.quality)\nlen=length(cats)\n\nfig=Figure(resolution=(350,250))\nax=Axis(fig[1,1],xlabel=\"residual_sugar\",ylabel=\"quality\")\nax.yticks=(1:len)\nfor (idx,g) in enumerate(paris1)\n    \n    scatter!(g.residual_sugar,g.quality)\nend\nfig\n```\n\n::: {.cell-output .cell-output-display execution_count=50}\n![](16-kaggle-redwine-dataset_files/figure-html/cell-5-output-1.svg){}\n:::\n:::\n\n\n",
    "supporting": [
      "16-kaggle-redwine-dataset_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}